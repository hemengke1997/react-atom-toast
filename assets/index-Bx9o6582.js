import{r as a,j as r,T as G,c as J,C as M,B as j,S as W,a as X,R as Y,b as Z,t as ee}from"./vendor-DBt41v04.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&R(e,n,t[n]);if(A)for(var n of A(t))se.call(t,n)&&R(e,n,t[n]);return e},_=(e,t)=>ne(e,re(t)),C=(e,t,n)=>R(e,typeof t!="symbol"?t+"":t,n);function B(){return typeof window<"u"&&typeof document<"u"}function I(e){return typeof e=="function"}function Q(e,t){const n=p({},e);return t.forEach(i=>delete n[i]),n}function ae(...e){return e.filter(Boolean).join(" ")}function ie(e){return Q(e,Object.keys(e).filter(t=>e[t]===void 0))}var le=(e,t)=>!Object.is(e,t);function ce(e,t=le){const n=a.useRef(),i=a.useRef();return t(i.current,e)&&(n.current=i.current,i.current=e),n.current}var ue=ce,de=()=>{const[,e]=a.useState({});return a.useCallback(()=>e({}),[])},fe=de;function he(e){const{defaultValue:t,value:n,onChange:i,beforeValue:o,postValue:l}=e,u=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",y=a.useMemo(()=>{if(u)return n;if(t!==void 0)return I(t)?t():t},[]),h=a.useRef(y);u&&(h.current=n);const b=ue(h.current);if(l){const s=l(h.current,b);s&&(h.current=s)}const m=fe(),k=s=>{let f=I(s)?s(h.current):s;if(o){const c=o(f,h.current);c&&(f=c)}i&&i(f,h.current),u||(h.current=f,m())};return[h.current,k,b]}var pe=B()?a.useLayoutEffect:a.useEffect,H=pe;function me(e){const{content:t,className:n,style:i,duration:o,onOpenChange:l,onClosed:u,pauseOnHover:y,hover:h,updateFlag:b,transition:m,open:k,onEnter:s,onUpdate:f,onExit:c,offsetHeight:O}=e,x=a.useRef(!1),P=a.useMemo(()=>typeof m=="string"?{transition:m}:{transition:m==null?void 0:m.name,duration:m==null?void 0:m.duration,exitDuration:m==null?void 0:m.exitDuration},[m]),v=a.useRef(),w=a.useRef(null),[S,N]=he({defaultValue:!!k,value:k,onChange:d=>{l(d)}}),T=a.useCallback(()=>{o&&(v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{N(!1),v.current&&clearTimeout(v.current)},+o))},[o,N]),$=a.useCallback(d=>{!y||!S||(d?v.current&&clearTimeout(v.current):T())},[S,y,T]);H(()=>{$(h)},[h]);const q=a.useCallback(()=>{if(!w.current)return;const d=w.current.clientHeight;s(d)},[s]),F=a.useCallback(()=>{var d;const E=(d=w.current)==null?void 0:d.clientHeight;f(E||0)},[f]),V=a.useCallback(()=>{var d;const E=(d=w.current)==null?void 0:d.clientHeight;c(E||0)},[c]),D=a.useCallback(()=>{u==null||u()},[u]),K=a.useCallback((d,E)=>[`translate(-50%, calc(-50% - ${E}px))`,d].filter(Boolean).join(" "),[]),z=a.useCallback(d=>[...new Set(["transform",d])].filter(Boolean).join(", "),[]);return H(()=>(x.current?F():x.current=!0,T(),()=>{v.current&&clearTimeout(v.current)}),[b]),H(()=>{t||D()},[t]),r.jsx(G,_(p({mounted:S},P),{onEnter:q,onExit:V,onExited:D,initial:!0,children:d=>r.jsx("div",{style:_(p(p({position:"fixed",zIndex:9999,top:"50%",left:"50%"},i),d),{transitionProperty:z(d.transitionProperty),transform:K(d.transform,O)}),ref:w,className:ae("toast__content",n),children:t})}))}var ve=me;function ge(e){const{toasts:t,onClosed:n,onOpenChange:i}=e,[o,l]=a.useState(!1),[u,y]=a.useState(new Map),h=a.useCallback((s,f)=>{y(c=>(c.set(s,f),new Map(c)))},[]),b=h,m=a.useCallback(s=>{y(f=>(f.delete(s),new Map(f)))},[]),k=a.useCallback((s,f)=>{let c=0,O=t.length-1;t.length>t[f].maxCount&&s.open===!1&&(O=O-1);for(let x=O;x>f;x--){const P=u.get(t[x].key)||0,v=u.get(t[x-1].key)||0;c+=v/2+P/2+t[f].gap}return c},[u,t]);return r.jsx("div",{onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},className:"toast__container",children:t.map((s,f)=>s.render(a.createElement(ve,_(p({},Q(s,["key"])),{key:s.key,onOpenChange:c=>i(s.key,c),onEnter:c=>{h(s.key,c)},onUpdate:c=>{b(s.key,c)},onExit:()=>{m(s.key)},onClosed:()=>{var c;(c=s.onClosed)==null||c.call(s),n(s.key)},hover:o,offsetHeight:k(s,f)}))))})}var ye=ge,U="__react_root__";function xe(e,t){const n=t[U]||J(t);n.render(e),t[U]=n}var _e=class{constructor(e){C(this,"containerID","react-atom-toast"),C(this,"container",null),C(this,"queue"),this.queue=e}createContainer(){if(B()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&xe(r.jsx(ye,{toasts:e,onClosed:t=>this.queue.remove(t),onOpenChange:(t,n)=>{this.queue.update(t,{open:n})}}),this.container)}},Ce=class{constructor(){C(this,"renderer"),C(this,"toasts",[]),this.renderer=new _e(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:i}=e;if(i&&this.toasts.some(u=>u.key===i)){this.update(i,e);return}const o=this.toasts.filter(u=>u.open===!0);if(n&&o.length>=n)if(n===1){this.update(o[o.length-1].key,_(p({},e),{open:!0}));return}else this.close((t=o[0])==null?void 0:t.key);const l=_(p({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(l),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>_(p({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(i=>i.key===e);n!==-1&&(this.toasts[n]=_(p(p({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},je=class{constructor(){C(this,"defaultOptions",{duration:2e3,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),C(this,"toastQueue"),this.toastQueue=new Ce}open(e){this.toastQueue.add(p(p({},this.defaultOptions),e))}close(e){this.toastQueue.close(e)}closeAll(){this.toastQueue.closeAll()}update(e,t){this.toastQueue.update(e,p({},t))}setDefaultOptions(e){this.defaultOptions=p(p({},this.defaultOptions),ie(e))}},g=new je;function be(){return r.jsx(M,{title:"Dynamic Style",children:r.jsx(j,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function ke(){const e="closable";return r.jsx(M,{title:"Closable",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(j,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),r.jsx(j,{type:"default",onClick:()=>{g.close(e)},children:"close"})]})})}function Oe(){return r.jsx(M,{title:"Default Toast",children:r.jsx(j,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`})},children:"open"})})}function we(){return r.jsx(M,{title:"Single Toast",children:r.jsx(j,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1e3}})},children:"open"})})}function L(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("div",{children:t},t)},t))}function Ee(){const[e,t]=a.useState([]);return r.jsx(M,{title:"Dynamic Update",children:r.jsxs(W,{children:[r.jsx(j,{onClick:()=>{const n=`update-${Math.random()}`;g.open({content:L(),key:n,onClosed:()=>{t(i=>i.filter(o=>o!==n))}}),t(i=>[...i,n])},children:"open"}),r.jsx(j,{type:"default",onClick:()=>{g.update(e[e.length-1],{content:L()})},children:"update"})]})})}g.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Me(){return r.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[r.jsx("h1",{className:"mb-8 text-3xl font-bold",children:r.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(Oe,{}),r.jsx(we,{}),r.jsx(be,{}),r.jsx(ke,{}),r.jsx(Ee,{})]})]})}X.createRoot(document.querySelector("#root")).render(r.jsx(Y.StrictMode,{children:r.jsx(Z,{theme:{cssVar:!0,algorithm:[ee.darkAlgorithm]},children:r.jsx(Me,{})})}));
