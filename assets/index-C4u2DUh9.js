import{r as d,j as o,T as G,c as J,C as P,B as b,S as W,R as X,a as Y,b as Z,t as ee}from"./vendor-BtlEFl89.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&H(e,n,t[n]);if(I)for(var n of I(t))se.call(t,n)&&H(e,n,t[n]);return e},C=(e,t)=>ne(e,re(t)),O=(e,t,n)=>H(e,typeof t!="symbol"?t+"":t,n);function ie(e){const t=d.useRef(e);t.current=d.useMemo(()=>e,[e]);const n=d.useRef();return n.current||(n.current=function(...i){return t.current.apply(this,i)}),n.current}var m=ie;function L(){return typeof window<"u"&&typeof document<"u"}function A(e){return typeof e=="function"}function B(e,t){const n=f({},e);return t.forEach(i=>delete n[i]),n}function ae(...e){return e.filter(Boolean).join(" ")}function ce(e){return B(e,Object.keys(e).filter(t=>e[t]===void 0))}var ue=(e,t)=>!Object.is(e,t);function le(e,t=ue){const n=d.useRef(),i=d.useRef();return t(i.current,e)&&(n.current=i.current,i.current=e),n.current}var de=le,fe=()=>{const[,e]=d.useState({});return d.useCallback(()=>e({}),[])},he=fe;function pe(e){const{defaultValue:t,value:n,onChange:i,beforeValue:r,postValue:a,onInit:u}=e,_=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",g=d.useMemo(()=>{let s=n;return _?s=n:t!==void 0&&(s=A(t)?t():t),s},[]);d.useEffect(()=>{u==null||u(g)},[g]);const h=d.useRef(g);_&&(h.current=n);const p=de(h.current);if(a){const s=a(h.current,p);s&&(h.current=s)}const k=he();function c(s){let v=A(s)?s(h.current):s;if(r){const w=r(v,h.current);w&&(v=w)}i&&i(v,h.current),_||(h.current=v,k())}return[h.current,m(c),p]}var me=L()?d.useLayoutEffect:d.useEffect,T=me;function ve(e){const{content:t,className:n,style:i,duration:r,onOpenChange:a,onClosed:u,pauseOnHover:_,hover:g,updateFlag:h,transition:p,open:k,onEnter:c,onUpdate:s,onExited:v,offsetHeight:w}=e,x=d.useRef(!1),S=m(()=>typeof p=="string"?{transition:p}:{transition:p==null?void 0:p.name,duration:p==null?void 0:p.duration,exitDuration:p==null?void 0:p.exitDuration}),y=d.useRef(),E=d.useRef(null),[R,Q]=pe({defaultValue:!!k,value:k,onChange:l=>{a(l)}}),N=m(()=>{r&&(y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{Q(!1),y.current&&clearTimeout(y.current)},+r))}),$=m(l=>{!_||!R||(l?y.current&&clearTimeout(y.current):N())});T(()=>{$(g)},[g]);const q=m(()=>{if(!E.current)return;const l=E.current.clientHeight;c(l)}),V=m(()=>{var l;const M=(l=E.current)==null?void 0:l.clientHeight;s(M||0)}),D=m(()=>{var l;const M=(l=E.current)==null?void 0:l.clientHeight;v(M||0),u==null||u()}),z=m((l,M)=>[`translate(-50%, calc(-50% - ${M}px))`,l].filter(Boolean).join(" ")),K=m(l=>[...new Set(["transform",l])].filter(Boolean).join(", "));return T(()=>{if(R)return x.current?V():x.current=!0,N(),()=>{y.current&&clearTimeout(y.current)}},[h]),T(()=>{t||D()},[t]),o.jsx(G,C(f({mounted:R},S()),{onEnter:q,onExited:D,initial:!0,children:l=>o.jsx("div",{style:C(f(f({position:"fixed",zIndex:9999,top:"50%",left:"50%"},i),l),{transitionProperty:K(l.transitionProperty),transform:z(l.transform,w)}),ref:E,className:ae("toast__content",n),children:t})}))}var ye=ve;function ge(e){const{toasts:t,onClosed:n,onOpenChange:i}=e,[r,a]=d.useState(!1),[u,_]=d.useState(new Map),g=m((c,s)=>{_(v=>(v.set(c,s),new Map(v)))}),h=m(g),p=m(c=>{_(s=>(s.delete(c),new Map(s)))}),k=m(c=>{const s=t.findIndex(x=>x.key===c.key);let v=0;const w=t.length-1;for(let x=w;x>s;x--){const S=u.get(t[x].key)||0,y=u.get(t[x-1].key)||0;v+=y/2+S/2+t[s].gap}return v});return o.jsx("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},className:"toast__container",children:t.map(c=>c.render(d.createElement(ye,C(f({},B(c,["key"])),{key:c.key,onOpenChange:s=>i(c.key,s),onEnter:s=>{g(c.key,s)},onUpdate:s=>{h(c.key,s)},onExited:()=>{p(c.key)},onClosed:()=>{var s;(s=c.onClosed)==null||s.call(c),n(c.key)},hover:r,offsetHeight:k(c)}))))})}var xe=ge,U="__react_root__";function _e(e,t){const n=t[U]||J.createRoot(t);n.render(e),t[U]=n}var je=class{constructor(e){O(this,"containerID","react-atom-toast"),O(this,"container",null),O(this,"queue"),this.queue=e}createContainer(){if(L()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&_e(o.jsx(xe,{toasts:e,onClosed:t=>this.queue.remove(t),onOpenChange:(t,n)=>{this.queue.update(t,{open:n})}}),this.container)}},Ce=class{constructor(){O(this,"renderer"),O(this,"toasts",[]),this.renderer=new je(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:i}=e;if(i&&this.toasts.some(u=>u.key===i)){this.update(i,e);return}const r=this.toasts.filter(u=>u.open===!0);if(n&&r.length>=n)if(n===1){for(let u=0;u<r.length-1;u++)this.remove(r[u].key);this.update(r[r.length-1].key,C(f({},e),{open:!0}));return}else this.close((t=r[0])==null?void 0:t.key);const a=C(f({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(a),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>C(f({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(i=>i.key===e);n!==-1&&(this.toasts[n]=C(f(f({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},Oe=class{constructor(){O(this,"defaultOptions",{duration:2e3,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),O(this,"toastQueue"),this.toastQueue=new Ce}open(e){e&&typeof e=="object"&&"content"in e||(e={content:e}),this.toastQueue.add(f(f({},this.defaultOptions),e))}close(e){this.toastQueue.close(e)}closeAll(){this.toastQueue.closeAll()}update(e,t){this.toastQueue.update(e,f({},t))}setDefaultOptions(e){this.defaultOptions=f(f({},this.defaultOptions),ce(e))}},j=new Oe;function be(){return o.jsx(P,{title:"Dynamic Style",children:o.jsx(b,{onClick:()=>{j.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function ke(){const e="closable";return o.jsx(P,{title:"Closable",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(b,{onClick:()=>{j.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{j.close(e)},children:"close"})]})})}function we(){return o.jsx(P,{title:"Default Toast",children:o.jsx(b,{onClick:()=>{j.open(`Hello, world! ${Math.random()}`)},children:"open"})})}function Ee(){return o.jsx(P,{title:"Single Toast",children:o.jsx(b,{onClick:()=>{j.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1e3}})},children:"open"})})}function F(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx("div",{children:t},t)},t))}function Me(){const[e,t]=d.useState([]);return o.jsx(P,{title:"Dynamic Update",children:o.jsxs(W,{children:[o.jsx(b,{onClick:()=>{const n=`update-${Math.random()}`;j.open({content:F(),key:n,onClosed:()=>{t(i=>i.filter(r=>r!==n))}}),t(i=>[...i,n])},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{j.update(e[e.length-1],{content:F()})},children:"update"})]})})}j.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Pe(){return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[o.jsx("h1",{className:"mb-8 text-3xl font-bold",children:o.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsx(we,{}),o.jsx(Ee,{}),o.jsx(be,{}),o.jsx(ke,{}),o.jsx(Me,{})]})]})}X.createRoot(document.querySelector("#root")).render(o.jsx(Y.StrictMode,{children:o.jsx(Z,{theme:{cssVar:!0,algorithm:[ee.darkAlgorithm]},children:o.jsx(Pe,{})})}));
