import{r as i,j as r,T as z,c as G,C as M,B as C,S as J,a as W,R as X,b as Y,t as Z}from"./vendor-DBt41v04.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var ee=Object.defineProperty,te=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))re.call(t,n)&&H(e,n,t[n]);if(D)for(var n of D(t))oe.call(t,n)&&H(e,n,t[n]);return e},w=(e,t)=>te(e,ne(t)),_=(e,t,n)=>H(e,typeof t!="symbol"?t+"":t,n);function L(){return typeof window<"u"&&typeof document<"u"}function A(e){return typeof e=="function"}function q(e,t){const n=p({},e);return t.forEach(a=>delete n[a]),n}function se(...e){return e.filter(Boolean).join(" ")}function ae(e){return q(e,Object.keys(e).filter(t=>e[t]===void 0))}var ie=(e,t)=>!Object.is(e,t);function le(e,t=ie){const n=i.useRef(),a=i.useRef();return t(a.current,e)&&(n.current=a.current,a.current=e),n.current}var ce=le,ue=()=>{const[,e]=i.useState({});return i.useCallback(()=>e({}),[])},de=ue;function fe(e){const{defaultValue:t,value:n,onChange:a,beforeValue:o,postValue:l}=e,f=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",y=i.useMemo(()=>{if(f)return n;if(t!==void 0)return A(t)?t():t},[]),m=i.useRef(y);f&&(m.current=n);const h=ce(m.current);if(l){const s=l(m.current,h);s&&(m.current=s)}const j=de(),b=s=>{let c=A(s)?s(m.current):s;if(o){const u=o(c,m.current);u&&(c=u)}a&&a(c,m.current),f||(m.current=c,j())};return[m.current,b,h]}var he=L()?i.useLayoutEffect:i.useEffect,T=he;function pe(e){const{content:t,className:n,duration:a,onOpenChange:o,onClosed:l,pauseOnHover:f,hover:y,updateFlag:m,transition:h,open:j,onEnter:b,onUpdate:s,onExit:c,offsetHeight:u}=e,k=i.useRef(!1),O=i.useMemo(()=>typeof h=="string"?{transition:h}:{transition:h==null?void 0:h.name,duration:h==null?void 0:h.duration,exitDuration:h==null?void 0:h.exitDuration},[h]),v=i.useRef(),x=i.useRef(null),[P,R]=fe({defaultValue:!!j,value:j,onChange:d=>{o(d)}}),S=i.useCallback(()=>{a&&(v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{R(!1)},+a))},[a,R]),B=i.useCallback(d=>{!f||!P||(d?v.current&&clearTimeout(v.current):S())},[P,f,S]);T(()=>{B(y)},[y]);const Q=i.useCallback(()=>{if(!x.current)return;const d=x.current.clientHeight;b(d)},[b]),$=i.useCallback(()=>{var d;const E=(d=x.current)==null?void 0:d.clientHeight;s(E||0)},[s]),F=i.useCallback(()=>{var d;const E=(d=x.current)==null?void 0:d.clientHeight;c(E||0)},[c]),N=i.useCallback(()=>{l==null||l()},[l]),V=i.useCallback((d,E)=>[`translate(-50%, calc(-50% - ${E}px))`,d].filter(Boolean).join(" "),[]),K=i.useCallback(d=>[...new Set(["transform",d])].filter(Boolean).join(", "),[]);return T(()=>(k.current?$():k.current=!0,S(),()=>{v.current&&clearTimeout(v.current)}),[m]),T(()=>{t||N()},[t]),r.jsx(z,w(p({mounted:P},O),{onEnter:Q,onExit:F,onExited:N,initial:!0,children:d=>r.jsx("div",{style:w(p({},d),{transitionProperty:K(d.transitionProperty),transform:V(d.transform,u)}),ref:x,className:se("toast__content",n),children:t})}))}var me=pe;function ve(e){const{toasts:t,queue:n}=e,[a,o]=i.useState(!1),[l,f]=i.useState(new Map),y=i.useCallback((s,c)=>{f(u=>(u.set(s,c),new Map(u)))},[]),m=y,h=i.useCallback(s=>{f(c=>(c.delete(s),new Map(c)))},[]),j=i.useCallback((s,c)=>{let u=0,k=t.length-1;t.length>t[c].maxCount&&s.open===!1&&(k=k-1);for(let O=k;O>c;O--){const v=l.get(t[O].key)||0,x=l.get(t[O-1].key)||0;u+=x/2+v/2+t[c].gap}return u},[l,t]),b=i.useCallback((s,c)=>{n.update(s,{open:c})},[n]);return r.jsx("div",{onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},className:"toast__container",children:t.map((s,c)=>s.render(r.jsx(me,p({onOpenChange:u=>b(s.key,u),onEnter:u=>{y(s.key,u)},onUpdate:u=>{m(s.key,u)},onExit:()=>{h(s.key)},onClosed:()=>{var u;(u=s.onClosed)==null||u.call(s),n.remove(s.key)},hover:a,offsetHeight:j(s,c)},q(s,["key"])),s.key)))})}var ge=ve,U="__react_root__";function ye(e,t){const n=t[U]||G(t);n.render(e),t[U]=n}var xe=class{constructor(e){if(_(this,"containerID","react-atom-toast"),_(this,"container",null),_(this,"queue"),this.queue=e,L()){let t=document.getElementById(this.containerID);t||(t=document.createElement("div"),t.id=this.containerID,document.body.appendChild(t)),this.container=t}}render(e){this.container&&ye(r.jsx(ge,{toasts:e,queue:this.queue}),this.container)}},_e=class{constructor(){_(this,"renderer"),_(this,"toasts",[]),this.renderer=new xe(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:a}=e;if(a&&this.toasts.some(f=>f.key===a)){this.update(a,e);return}const o=this.toasts.filter(f=>f.open===!0);if(n&&o.length>=n)if(n===1){this.update(o[o.length-1].key,w(p({},e),{open:!0}));return}else this.close((t=o[0])==null?void 0:t.key);const l=w(p({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(l),this.render()}close(e){e&&(this.update(e,{open:!1}),this.render())}closeAll(){this.toasts=this.toasts.map(e=>w(p({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(a=>a.key===e);n!==-1&&(this.toasts[n]=w(p(p({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag})),this.render()}},Ce=class{constructor(){_(this,"defaultOptions",{duration:2e3,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),_(this,"toastQueue"),this.toastQueue=new _e}open(e){this.toastQueue.add(p(p({},this.defaultOptions),e))}close(e){this.toastQueue.close(e)}closeAll(){this.toastQueue.closeAll()}update(e,t){this.toastQueue.update(e,p({},t))}setDefaultOptions(e){this.defaultOptions=p(p({},this.defaultOptions),ae(e))}},g=new Ce;function je(){return r.jsx(M,{title:"Dynamic Style",children:r.jsx(C,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function be(){const e="closable";return r.jsx(M,{title:"Closable",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(C,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),r.jsx(C,{type:"default",onClick:()=>{g.close(e)},children:"close"})]})})}function ke(){return r.jsx(M,{title:"Default Toast",children:r.jsx(C,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`})},children:"open"})})}function Oe(){return r.jsx(M,{title:"Single Toast",children:r.jsx(C,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1e3}})},children:"open"})})}function I(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("div",{children:t},t)}))}function we(){const[e,t]=i.useState([]);return r.jsx(M,{title:"Dynamic Update",children:r.jsxs(J,{children:[r.jsx(C,{onClick:()=>{const n=`update-${Math.random()}`;g.open({content:I(),key:n,onClosed:()=>{t(a=>a.filter(o=>o!==n))}}),t(a=>[...a,n])},children:"open"}),r.jsx(C,{type:"default",onClick:()=>{g.update(e[e.length-1],{content:I()})},children:"update"})]})})}g.setDefaultOptions({className:"bg-cyan-400 p-2 rounded"});function Ee(){return r.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[r.jsx("h1",{className:"mb-8 text-3xl font-bold",children:r.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(ke,{}),r.jsx(Oe,{}),r.jsx(je,{}),r.jsx(be,{}),r.jsx(we,{})]})]})}W.createRoot(document.querySelector("#root")).render(r.jsx(X.StrictMode,{children:r.jsx(Y,{theme:{cssVar:!0,algorithm:[Z.darkAlgorithm]},children:r.jsx(Ee,{})})}));
