import{r as s,j as o,T as $,c as V,C as k,B as j,a as U,R as K,b as z,t as G}from"./vendor-Ba3AkNv8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var J=Object.defineProperty,W=Object.defineProperties,X=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&S(e,r,t[r]);if(H)for(var r of H(t))Z.call(t,r)&&S(e,r,t[r]);return e},C=(e,t)=>W(e,X(t)),g=(e,t,r)=>S(e,typeof t!="symbol"?t+"":t,r);function I(){return typeof window<"u"&&typeof document<"u"}function N(e){return typeof e=="function"}function A(e,t){const r=p({},e);return t.forEach(a=>delete r[a]),r}function ee(...e){return e.filter(Boolean).join(" ")}function te(e){return A(e,Object.keys(e).filter(t=>e[t]===void 0))}var re=(e,t)=>!Object.is(e,t);function ne(e,t=re){const r=s.useRef(),a=s.useRef();return t(a.current,e)&&(r.current=a.current,a.current=e),r.current}var oe=ne,se=()=>{const[,e]=s.useState({});return s.useCallback(()=>e({}),[])},ae=se;function ie(e){const{defaultValue:t,value:r,onChange:a,beforeValue:n,postValue:i}=e,d=Object.prototype.hasOwnProperty.call(e,"value")&&typeof r<"u",x=s.useMemo(()=>{if(d)return r;if(t!==void 0)return N(t)?t():t},[]),m=s.useRef(x);d&&(m.current=r);const h=oe(m.current);if(i){const l=i(m.current,h);l&&(m.current=l)}const _=ae(),u=l=>{let c=N(l)?l(m.current):l;if(n){const y=n(c,m.current);y&&(c=y)}a&&a(c,m.current),d||(m.current=c,_())};return[m.current,u,h]}var ue=I()?s.useLayoutEffect:s.useEffect,M=ue;function le(e){const{content:t,className:r,duration:a,onOpenChange:n,onClosed:i,pauseOnHover:d,hover:x,updateFlag:m,transition:h,open:_,onEnter:u,onExit:l,offsetHeight:c}=e,y=s.useMemo(()=>typeof h=="string"?{transition:h}:{transition:h==null?void 0:h.name,duration:h==null?void 0:h.duration,exitDuration:h==null?void 0:h.exitDuration},[h]),v=s.useRef(),b=s.useRef(null),[w,R]=ie({defaultValue:!!_,value:_,onChange:f=>{n(f)}}),E=s.useCallback(()=>{a&&(v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{R(!1)},+a))},[a,R]),L=s.useCallback(f=>{!d||!w||(f?v.current&&clearTimeout(v.current):E())},[w,d,E]);M(()=>{L(x)},[x]);const q=s.useCallback(()=>{if(!b.current)return;const f=b.current.clientHeight;u(f)},[u]),B=s.useCallback(()=>{var f;const P=(f=b.current)==null?void 0:f.clientHeight;l(P||0)},[l]),T=s.useCallback(()=>{i==null||i()},[i]),Q=s.useCallback((f,P)=>[`translate(-50%, calc(-50% - ${P}px))`,f].filter(Boolean).join(" "),[]),F=s.useCallback(f=>[...new Set(["transform",f])].filter(Boolean).join(", "),[]);return M(()=>(E(),()=>{v.current&&clearTimeout(v.current)}),[m]),M(()=>{t||T()},[t]),o.jsx($,C(p({mounted:w},y),{onEnter:q,onExit:B,onExited:T,initial:!0,children:f=>o.jsx("div",{style:C(p({},f),{transitionProperty:F(f.transitionProperty),transform:Q(f.transform,c)}),ref:b,className:ee("toast__content",r),children:t})}))}var ce=le;function de(e){const{toasts:t,queue:r}=e,[a,n]=s.useState(!1),[i,d]=s.useState(new Map),x=s.useCallback((u,l)=>{d(c=>(c.set(u,l),new Map(c)))},[]),m=s.useCallback(u=>{d(l=>(l.delete(u),new Map(l)))},[]),h=s.useCallback((u,l)=>{let c=0,y=t.length-1;t.length>t[l].maxCount&&u.open===!1&&(y=y-1);for(let v=y;v>l;v--)c+=(i.get(t[v].key)||0)+t[v].gap;return c},[i,t]),_=s.useCallback((u,l)=>{r.update(u,{open:l})},[r]);return o.jsx("div",{onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},className:"toast__container",children:t.map((u,l)=>u.renderer(o.jsx(ce,p({onOpenChange:c=>_(u.key,c),onEnter:c=>{x(u.key,c)},onExit:()=>{m(u.key)},onClosed:()=>{var c;(c=u.onClosed)==null||c.call(u),r.remove(u.key)},hover:a,offsetHeight:h(u,l)},A(u,["key"])),u.key)))})}var fe=de,D="__react_root__";function pe(e,t){const r=t[D]||V(t);r.render(e),t[D]=r}var he=class{constructor(e){if(g(this,"containerID","react-atom-toast"),g(this,"container",null),g(this,"queue"),this.queue=e,I()){let t=document.getElementById(this.containerID);t||(t=document.createElement("div"),t.id=this.containerID,document.body.appendChild(t)),this.container=t}}render(e){this.container&&pe(o.jsx(fe,{toasts:e,queue:this.queue}),this.container)}},me=class{constructor(){g(this,"renderer"),g(this,"toasts",[]),this.renderer=new he(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:r,key:a}=e;if(a&&this.toasts.some(d=>d.key===a)){this.update(a,e);return}const n=this.toasts.filter(d=>d.open===!0);if(r&&n.length>=r)if(r===1){this.update(n[n.length-1].key,C(p({},e),{open:!0}));return}else this.close((t=n[0])==null?void 0:t.key);const i=C(p({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(i),this.render()}close(e){e&&(this.update(e,{open:!1}),this.render())}closeAll(){this.toasts=this.toasts.map(e=>C(p({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const r=this.toasts.findIndex(a=>a.key===e);r!==-1&&(this.toasts[r]=C(p(p({},this.toasts[r]),t),{updateFlag:!this.toasts[r].updateFlag})),this.render()}},ve=class{constructor(){g(this,"defaultOptions",{duration:2e3,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,renderer:e=>e}),g(this,"toastQueue"),this.toastQueue=new me}open(e){this.toastQueue.add(p(p({},this.defaultOptions),e))}close(e){this.toastQueue.close(e)}closeAll(){this.toastQueue.closeAll()}update(e,t){this.toastQueue.update(e,p(p({},this.defaultOptions),t))}setDefaultOptions(e){this.defaultOptions=p(p({},this.defaultOptions),te(e))}},O=new ve;function ye(){return o.jsx(k,{title:"修改样式",children:o.jsx(j,{onClick:()=>{O.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function ge(){const e="closable";return o.jsx(k,{title:"可关闭",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(j,{onClick:()=>{O.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),o.jsx(j,{type:"default",onClick:()=>{O.close(e)},children:"close"})]})})}function xe(){return o.jsx(k,{title:"默认toast",children:o.jsx(j,{onClick:()=>{O.open({content:`Hello, world! ${Math.random()}`})},children:"open"})})}function _e(){return o.jsx(k,{title:"单个toast",children:o.jsx(j,{onClick:()=>{O.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1e3}})},children:"open"})})}O.setDefaultOptions({className:"bg-cyan-400 p-2 rounded"});function Ce(){return o.jsxs("div",{children:[o.jsx("h1",{className:"m-2 text-3xl font-bold",children:"react-atom-toast"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsx(xe,{}),o.jsx(_e,{}),o.jsx(ye,{}),o.jsx(ge,{})]})]})}U.createRoot(document.querySelector("#root")).render(o.jsx(K.StrictMode,{children:o.jsx(z,{theme:{cssVar:!0,algorithm:[G.darkAlgorithm]},children:o.jsx(Ce,{})})}));
