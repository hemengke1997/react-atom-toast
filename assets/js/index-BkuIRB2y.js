import{r as l,j as o,T as G,c as J,C as P,B as b,S as W,R as X,a as Y,b as Z,t as ee}from"./vendor-C4UeqpuF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&T(e,n,t[n]);if(I)for(var n of I(t))se.call(t,n)&&T(e,n,t[n]);return e},O=(e,t)=>ne(e,re(t)),v=(e,t,n)=>T(e,typeof t!="symbol"?t+"":t,n);function p(e){const t=l.useRef(e);t.current=l.useMemo(()=>e,[e]);const n=l.useRef();return n.current||(n.current=function(...r){return t.current.apply(this,r)}),n.current}function B(){return typeof window<"u"&&typeof document<"u"}function U(e){return typeof e=="function"}function ie(e,t){const n=y({},e);return t.forEach(r=>delete n[r]),n}function ae(...e){return e.filter(Boolean).join(" ")}function A(e,t){const n=y({},t);for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function ce(e){return(e||0)*1e3}var ue=(e,t)=>!Object.is(e,t);function le(e,t=ue){const n=l.useRef(),r=l.useRef();return t(r.current,e)&&(n.current=r.current,r.current=e),n.current}var de=()=>{const[,e]=l.useState({});return l.useCallback(()=>e({}),[])};function fe(e){const{defaultValue:t,value:n,onChange:r,beforeValue:s,postValue:a,onInit:u}=e,_=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",x=l.useMemo(()=>{let i=n;return _?i=n:t!==void 0&&(i=U(t)?t():t),i},[]);l.useEffect(()=>{u==null||u(x)},[x]);const f=l.useRef(x);_&&(f.current=n);const h=le(f.current);if(a){const i=a(f.current,h);i&&(f.current=i)}const M=de();function c(i){let m=U(i)?i(f.current):i;if(s){const k=s(m,f.current);k&&(m=k)}r&&r(m,f.current),_||(f.current=m,M())}return[f.current,p(c),h]}var H=B()?l.useLayoutEffect:l.useEffect,he=e=>(t,n)=>{const r=l.useRef(!1);e(()=>()=>{r.current=!1},[]),e(()=>{if(!r.current)r.current=!0;else return t()},n)},pe=he,me=pe(H);function ve(e){const{content:t,className:n,style:r,duration:s,onOpenChange:a,onClosed:u,pauseOnHover:_,hover:x,updateFlag:f,transition:h,open:M,onEnter:c,onUpdate:i,onExited:m,offsetHeight:k}=e,j=l.useRef(!1),R=p(()=>typeof h=="string"?{transition:h}:{transition:h==null?void 0:h.name,duration:h==null?void 0:h.duration,exitDuration:h==null?void 0:h.exitDuration}),g=l.useRef(),E=l.useRef(null),[S,Q]=fe({defaultValue:!!M,value:M,onChange:d=>{a(d)}}),N=p(()=>{s&&(g.current&&clearTimeout(g.current),g.current=window.setTimeout(()=>{Q(!1),g.current&&clearTimeout(g.current)},ce(s)))}),$=p(d=>{!_||!S||(d?g.current&&clearTimeout(g.current):N())});me(()=>{$(x)},[x]);const q=p(()=>{if(!E.current)return;const d=E.current.clientHeight;c(d)}),V=p(()=>{var d;const w=(d=E.current)==null?void 0:d.clientHeight;i(w||0)}),D=p(()=>{var d;const w=(d=E.current)==null?void 0:d.clientHeight;m(w||0),u==null||u()}),z=p((d,w)=>[`translate(-50%, calc(-50% - ${w}px))`,d].filter(Boolean).join(" ")),K=p(d=>[...new Set(["transform",d])].filter(Boolean).join(", "));return H(()=>{if(S)return j.current?V():j.current=!0,N(),()=>{g.current&&clearTimeout(g.current)}},[f]),H(()=>{t||D()},[t]),o.jsx(G,O(y({mounted:S},R()),{onEnter:q,onExited:D,initial:!0,children:d=>o.jsx("div",{style:O(y(y({position:"fixed",zIndex:9999,top:"50%",left:"50%"},r),d),{transitionProperty:K(d.transitionProperty),transform:z(d.transform,k)}),ref:E,className:ae("toast__content",n),children:t})}))}var ye=ve;function ge(e){const{toasts:t,onClosed:n,onOpenChange:r}=e,[s,a]=l.useState(!1),[u,_]=l.useState(new Map),x=p((c,i)=>{_(m=>(m.set(c,i),new Map(m)))}),f=p(x),h=p(c=>{_(i=>(i.delete(c),new Map(i)))}),M=p(c=>{const i=t.findIndex(j=>j.key===c.key);let m=0;const k=t.length-1;for(let j=k;j>i;j--){const R=u.get(t[j].key)||0,g=u.get(t[j-1].key)||0;m+=g/2+R/2+t[i].gap}return m});return o.jsx("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},className:"toast__container",children:t.map(c=>o.jsx(l.Fragment,{children:c.render(o.jsx(ye,O(y({},ie(c,["key"])),{onOpenChange:i=>r(c.key,i),onEnter:i=>{x(c.key,i)},onUpdate:i=>{f(c.key,i)},onExited:()=>{h(c.key)},onClosed:()=>{var i;(i=c.onClosed)==null||i.call(c),n(c.key)},hover:s,offsetHeight:M(c)})))},c.key))})}var xe=ge,F="__react_root__";function je(e,t){const n=t[F]||J.createRoot(t);n.render(e),t[F]=n}var _e=class{constructor(e){v(this,"containerID","react-atom-toast"),v(this,"container",null),v(this,"queue"),this.queue=e}createContainer(){if(B()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&this.reactMount(e,this.container)}reactMount(e,t){je(o.jsx(xe,{toasts:e,onClosed:n=>this.queue.remove(n),onOpenChange:(n,r)=>{this.queue.update(n,{open:r})}}),t)}},Ce=class{constructor(){v(this,"renderer"),v(this,"toasts",[]),this.renderer=new _e(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:r}=e;if(r&&this.toasts.some(u=>u.key===r)){this.update(r,e);return}const s=this.toasts.filter(u=>u.open===!0);if(n&&s.length>=n)if(n===1){for(let u=0;u<s.length-1;u++)this.remove(s[u].key);this.update(s[s.length-1].key,O(y({},e),{open:!0}));return}else this.close((t=s[0])==null?void 0:t.key);const a=O(y({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(a),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>O(y({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(r=>r.key===e);n!==-1&&(this.toasts[n]=O(y(y({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},Oe=class{constructor(){v(this,"defaultOptions",{duration:2,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),v(this,"toastQueue"),v(this,"open",e=>{e&&typeof e=="object"&&"content"in e||(e={content:e}),this.toastQueue.add(A(e,this.defaultOptions))}),v(this,"close",e=>{this.toastQueue.close(e)}),v(this,"closeAll",()=>{this.toastQueue.closeAll()}),v(this,"update",(e,t)=>{this.toastQueue.update(e,y({},t))}),v(this,"setDefaultOptions",e=>{this.defaultOptions=A(e,this.defaultOptions)}),this.toastQueue=new Ce}},C=new Oe;function be(){return o.jsx(P,{title:"Dynamic Style",children:o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function Me(){const e="closable";return o.jsx(P,{title:"Closable",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{C.close(e)},children:"close"})]})})}function ke(){return o.jsx(P,{title:"Default Toast",children:o.jsx(b,{onClick:()=>{C.open(`Hello, world! ${Math.random()}`)},children:"open"})})}function Ee(){return o.jsx(P,{title:"Single Toast",children:o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1}})},children:"open"})})}function L(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx("div",{children:t},t)},t))}function we(){const[e,t]=l.useState([]);return o.jsx(P,{title:"Dynamic Update",children:o.jsxs(W,{children:[o.jsx(b,{onClick:()=>{const n=`update-${Math.random()}`;C.open({content:L(),key:n,onClosed:()=>{t(r=>r.filter(s=>s!==n))}}),t(r=>[...r,n])},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{C.update(e[e.length-1],{content:L()})},children:"update"})]})})}C.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Pe(){return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[o.jsx("h1",{className:"mb-8 text-3xl font-bold",children:o.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsx(ke,{}),o.jsx(Ee,{}),o.jsx(be,{}),o.jsx(Me,{}),o.jsx(we,{})]})]})}X.createRoot(document.querySelector("#root")).render(o.jsx(Y.StrictMode,{children:o.jsx(Z,{theme:{cssVar:!0,algorithm:[ee.darkAlgorithm]},children:o.jsx(Pe,{})})}));
