import{r as d,j as o,T as J,c as W,C as P,B as b,S as X,R as Y,a as Z,b as ee,t as te}from"./vendor-BC1iJukk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var ne=Object.defineProperty,re=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&H(e,n,t[n]);if(I)for(var n of I(t))ie.call(t,n)&&H(e,n,t[n]);return e},O=(e,t)=>re(e,oe(t)),y=(e,t,n)=>H(e,typeof t!="symbol"?t+"":t,n);function f(e){const t=d.useRef(e);t.current=d.useMemo(()=>e,[e]);const n=d.useRef();return n.current||(n.current=function(...s){return t.current.apply(this,s)}),n.current}function B(){return typeof window<"u"&&typeof document<"u"}function A(e){return typeof e=="function"}function ae(e,t){const n=g({},e);return t.forEach(s=>delete n[s]),n}function ce(...e){return e.filter(Boolean).join(" ")}function U(e,t){const n=g({},t);for(const s in e)e[s]!==void 0&&(n[s]=e[s]);return n}var ue=(e,t)=>!Object.is(e,t);function le(e,t=ue){const n=d.useRef(),s=d.useRef();return t(s.current,e)&&(n.current=s.current,s.current=e),n.current}var de=()=>{const[,e]=d.useState({});return d.useCallback(()=>e({}),[])};function fe(e){const{defaultValue:t,value:n,onChange:s,beforeValue:r,postValue:a,onInit:l}=e,_=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",x=d.useMemo(()=>{let i=n;return _?i=n:t!==void 0&&(i=A(t)?t():t),i},[]);d.useEffect(()=>{l==null||l(x)},[x]);const h=d.useRef(x);_&&(h.current=n);const p=le(h.current);if(a){const i=a(h.current,p);i&&(h.current=i)}const k=de();function c(i){let m=A(i)?i(h.current):i;if(r){const M=r(m,h.current);M&&(m=M)}s&&s(m,h.current),_||(h.current=m,k())}return[h.current,f(c),p]}var T=B()?d.useLayoutEffect:d.useEffect;function he(e){const{content:t,className:n,style:s,duration:r,onOpenChange:a,onClosed:l,pauseOnHover:_,hover:x,updateFlag:h,transition:p,open:k,onEnter:c,onUpdate:i,onExited:m,offsetHeight:M}=e,j=d.useRef(!1),S=f(()=>typeof p=="string"?{transition:p}:{transition:p==null?void 0:p.name,duration:p==null?void 0:p.duration,exitDuration:p==null?void 0:p.exitDuration}),v=d.useRef(),w=d.useRef(null),[R,Q]=fe({defaultValue:!!k,value:k,onChange:u=>{a(u)}}),$=f(u=>(u||0)*1e3),N=f(()=>{r&&(v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{Q(!1),v.current&&clearTimeout(v.current)},$(r)))}),q=f(u=>{!_||!R||(u?v.current&&clearTimeout(v.current):N())});T(()=>{q(x)},[x]);const V=f(()=>{if(!w.current)return;const u=w.current.clientHeight;c(u)}),z=f(()=>{var u;const E=(u=w.current)==null?void 0:u.clientHeight;i(E||0)}),D=f(()=>{var u;const E=(u=w.current)==null?void 0:u.clientHeight;m(E||0),l==null||l()}),K=f((u,E)=>[`translate(-50%, calc(-50% - ${E}px))`,u].filter(Boolean).join(" ")),G=f(u=>[...new Set(["transform",u])].filter(Boolean).join(", "));return T(()=>{if(R)return j.current?z():j.current=!0,N(),()=>{v.current&&clearTimeout(v.current)}},[h]),T(()=>{t||D()},[t]),o.jsx(J,O(g({mounted:R},S()),{onEnter:V,onExited:D,initial:!0,children:u=>o.jsx("div",{style:O(g(g({position:"fixed",zIndex:9999,top:"50%",left:"50%"},s),u),{transitionProperty:G(u.transitionProperty),transform:K(u.transform,M)}),ref:w,className:ce("toast__content",n),children:t})}))}var pe=he;function me(e){const{toasts:t,onClosed:n,onOpenChange:s}=e,[r,a]=d.useState(!1),[l,_]=d.useState(new Map),x=f((c,i)=>{_(m=>(m.set(c,i),new Map(m)))}),h=f(x),p=f(c=>{_(i=>(i.delete(c),new Map(i)))}),k=f(c=>{const i=t.findIndex(j=>j.key===c.key);let m=0;const M=t.length-1;for(let j=M;j>i;j--){const S=l.get(t[j].key)||0,v=l.get(t[j-1].key)||0;m+=v/2+S/2+t[i].gap}return m});return o.jsx("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},className:"toast__container",children:t.map(c=>c.render(d.createElement(pe,O(g({},ae(c,["key"])),{key:c.key,onOpenChange:i=>s(c.key,i),onEnter:i=>{x(c.key,i)},onUpdate:i=>{h(c.key,i)},onExited:()=>{p(c.key)},onClosed:()=>{var i;(i=c.onClosed)==null||i.call(c),n(c.key)},hover:r,offsetHeight:k(c)}))))})}var ye=me,F="__react_root__";function ge(e,t){const n=t[F]||W.createRoot(t);n.render(e),t[F]=n}var ve=class{constructor(e){y(this,"containerID","react-atom-toast"),y(this,"container",null),y(this,"queue"),this.queue=e}createContainer(){if(B()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&ge(o.jsx(ye,{toasts:e,onClosed:t=>this.queue.remove(t),onOpenChange:(t,n)=>{this.queue.update(t,{open:n})}}),this.container)}},xe=class{constructor(){y(this,"renderer"),y(this,"toasts",[]),this.renderer=new ve(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:s}=e;if(s&&this.toasts.some(l=>l.key===s)){this.update(s,e);return}const r=this.toasts.filter(l=>l.open===!0);if(n&&r.length>=n)if(n===1){for(let l=0;l<r.length-1;l++)this.remove(r[l].key);this.update(r[r.length-1].key,O(g({},e),{open:!0}));return}else this.close((t=r[0])==null?void 0:t.key);const a=O(g({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(a),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>O(g({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(s=>s.key===e);n!==-1&&(this.toasts[n]=O(g(g({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},je=class{constructor(){y(this,"defaultOptions",{duration:2,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),y(this,"toastQueue"),y(this,"open",e=>{e&&typeof e=="object"&&"content"in e||(e={content:e}),this.toastQueue.add(U(e,this.defaultOptions))}),y(this,"close",e=>{this.toastQueue.close(e)}),y(this,"closeAll",()=>{this.toastQueue.closeAll()}),y(this,"update",(e,t)=>{this.toastQueue.update(e,g({},t))}),y(this,"setDefaultOptions",e=>{this.defaultOptions=U(e,this.defaultOptions)}),this.toastQueue=new xe}},C=new je;function _e(){return o.jsx(P,{title:"Dynamic Style",children:o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function Ce(){const e="closable";return o.jsx(P,{title:"Closable",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{C.close(e)},children:"close"})]})})}function Oe(){return o.jsx(P,{title:"Default Toast",children:o.jsx(b,{onClick:()=>{C.open(`Hello, world! ${Math.random()}`)},children:"open"})})}function be(){return o.jsx(P,{title:"Single Toast",children:o.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1}})},children:"open"})})}function L(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx("div",{children:t},t)},t))}function ke(){const[e,t]=d.useState([]);return o.jsx(P,{title:"Dynamic Update",children:o.jsxs(X,{children:[o.jsx(b,{onClick:()=>{const n=`update-${Math.random()}`;C.open({content:L(),key:n,onClosed:()=>{t(s=>s.filter(r=>r!==n))}}),t(s=>[...s,n])},children:"open"}),o.jsx(b,{type:"default",onClick:()=>{C.update(e[e.length-1],{content:L()})},children:"update"})]})})}C.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Me(){return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[o.jsx("h1",{className:"mb-8 text-3xl font-bold",children:o.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsx(Oe,{}),o.jsx(be,{}),o.jsx(_e,{}),o.jsx(Ce,{}),o.jsx(ke,{})]})]})}Y.createRoot(document.querySelector("#root")).render(o.jsx(Z.StrictMode,{children:o.jsx(ee,{theme:{cssVar:!0,algorithm:[te.darkAlgorithm]},children:o.jsx(Me,{})})}));
