import{r as d,j as s,T as G,c as J,C as P,B as b,S as W,R as X,a as Y,b as Z,t as ee}from"./vendor-C4UeqpuF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&H(e,n,t[n]);if(I)for(var n of I(t))se.call(t,n)&&H(e,n,t[n]);return e},O=(e,t)=>ne(e,re(t)),y=(e,t,n)=>H(e,typeof t!="symbol"?t+"":t,n);function p(e){const t=d.useRef(e);t.current=d.useMemo(()=>e,[e]);const n=d.useRef();return n.current||(n.current=function(...r){return t.current.apply(this,r)}),n.current}function B(){return typeof window<"u"&&typeof document<"u"}function A(e){return typeof e=="function"}function ie(e,t){const n=g({},e);return t.forEach(r=>delete n[r]),n}function ae(...e){return e.filter(Boolean).join(" ")}function U(e,t){const n=g({},t);for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function ce(e){return(e||0)*1e3}var ue=(e,t)=>!Object.is(e,t);function le(e,t=ue){const n=d.useRef(),r=d.useRef();return t(r.current,e)&&(n.current=r.current,r.current=e),n.current}var de=()=>{const[,e]=d.useState({});return d.useCallback(()=>e({}),[])};function fe(e){const{defaultValue:t,value:n,onChange:r,beforeValue:o,postValue:a,onInit:u}=e,_=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",x=d.useMemo(()=>{let i=n;return _?i=n:t!==void 0&&(i=A(t)?t():t),i},[]);d.useEffect(()=>{u==null||u(x)},[x]);const f=d.useRef(x);_&&(f.current=n);const h=le(f.current);if(a){const i=a(f.current,h);i&&(f.current=i)}const k=de();function c(i){let m=A(i)?i(f.current):i;if(o){const M=o(m,f.current);M&&(m=M)}r&&r(m,f.current),_||(f.current=m,k())}return[f.current,p(c),h]}var T=B()?d.useLayoutEffect:d.useEffect;function he(e){const{content:t,className:n,style:r,duration:o,onOpenChange:a,onClosed:u,pauseOnHover:_,hover:x,updateFlag:f,transition:h,open:k,onEnter:c,onUpdate:i,onExited:m,offsetHeight:M}=e,j=d.useRef(!1),S=p(()=>typeof h=="string"?{transition:h}:{transition:h==null?void 0:h.name,duration:h==null?void 0:h.duration,exitDuration:h==null?void 0:h.exitDuration}),v=d.useRef(),w=d.useRef(null),[R,Q]=fe({defaultValue:!!k,value:k,onChange:l=>{a(l)}}),N=p(()=>{o&&(v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{Q(!1),v.current&&clearTimeout(v.current)},ce(o)))}),$=p(l=>{!_||!R||(l?v.current&&clearTimeout(v.current):N())});T(()=>{$(x)},[x]);const q=p(()=>{if(!w.current)return;const l=w.current.clientHeight;c(l)}),V=p(()=>{var l;const E=(l=w.current)==null?void 0:l.clientHeight;i(E||0)}),D=p(()=>{var l;const E=(l=w.current)==null?void 0:l.clientHeight;m(E||0),u==null||u()}),z=p((l,E)=>[`translate(-50%, calc(-50% - ${E}px))`,l].filter(Boolean).join(" ")),K=p(l=>[...new Set(["transform",l])].filter(Boolean).join(", "));return T(()=>{if(R)return j.current?V():j.current=!0,N(),()=>{v.current&&clearTimeout(v.current)}},[f]),T(()=>{t||D()},[t]),s.jsx(G,O(g({mounted:R},S()),{onEnter:q,onExited:D,initial:!0,children:l=>s.jsx("div",{style:O(g(g({position:"fixed",zIndex:9999,top:"50%",left:"50%"},r),l),{transitionProperty:K(l.transitionProperty),transform:z(l.transform,M)}),ref:w,className:ae("toast__content",n),children:t})}))}var pe=he;function me(e){const{toasts:t,onClosed:n,onOpenChange:r}=e,[o,a]=d.useState(!1),[u,_]=d.useState(new Map),x=p((c,i)=>{_(m=>(m.set(c,i),new Map(m)))}),f=p(x),h=p(c=>{_(i=>(i.delete(c),new Map(i)))}),k=p(c=>{const i=t.findIndex(j=>j.key===c.key);let m=0;const M=t.length-1;for(let j=M;j>i;j--){const S=u.get(t[j].key)||0,v=u.get(t[j-1].key)||0;m+=v/2+S/2+t[i].gap}return m});return s.jsx("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},className:"toast__container",children:t.map(c=>c.render(d.createElement(pe,O(g({},ie(c,["key"])),{key:c.key,onOpenChange:i=>r(c.key,i),onEnter:i=>{x(c.key,i)},onUpdate:i=>{f(c.key,i)},onExited:()=>{h(c.key)},onClosed:()=>{var i;(i=c.onClosed)==null||i.call(c),n(c.key)},hover:o,offsetHeight:k(c)}))))})}var ye=me,F="__react_root__";function ge(e,t){const n=t[F]||J.createRoot(t);n.render(e),t[F]=n}var ve=class{constructor(e){y(this,"containerID","react-atom-toast"),y(this,"container",null),y(this,"queue"),this.queue=e}createContainer(){if(B()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&this.reactMount(e,this.container)}reactMount(e,t){ge(s.jsx(ye,{toasts:e,onClosed:n=>this.queue.remove(n),onOpenChange:(n,r)=>{this.queue.update(n,{open:r})}}),t)}},xe=class{constructor(){y(this,"renderer"),y(this,"toasts",[]),this.renderer=new ve(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:r}=e;if(r&&this.toasts.some(u=>u.key===r)){this.update(r,e);return}const o=this.toasts.filter(u=>u.open===!0);if(n&&o.length>=n)if(n===1){for(let u=0;u<o.length-1;u++)this.remove(o[u].key);this.update(o[o.length-1].key,O(g({},e),{open:!0}));return}else this.close((t=o[0])==null?void 0:t.key);const a=O(g({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(a),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>O(g({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(r=>r.key===e);n!==-1&&(this.toasts[n]=O(g(g({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},je=class{constructor(){y(this,"defaultOptions",{duration:2,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),y(this,"toastQueue"),y(this,"open",e=>{e&&typeof e=="object"&&"content"in e||(e={content:e}),this.toastQueue.add(U(e,this.defaultOptions))}),y(this,"close",e=>{this.toastQueue.close(e)}),y(this,"closeAll",()=>{this.toastQueue.closeAll()}),y(this,"update",(e,t)=>{this.toastQueue.update(e,g({},t))}),y(this,"setDefaultOptions",e=>{this.defaultOptions=U(e,this.defaultOptions)}),this.toastQueue=new xe}},C=new je;function _e(){return s.jsx(P,{title:"Dynamic Style",children:s.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}function Ce(){const e="closable";return s.jsx(P,{title:"Closable",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),s.jsx(b,{type:"default",onClick:()=>{C.close(e)},children:"close"})]})})}function Oe(){return s.jsx(P,{title:"Default Toast",children:s.jsx(b,{onClick:()=>{C.open(`Hello, world! ${Math.random()}`)},children:"open"})})}function be(){return s.jsx(P,{title:"Single Toast",children:s.jsx(b,{onClick:()=>{C.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1}})},children:"open"})})}function L(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx("div",{children:t},t)},t))}function ke(){const[e,t]=d.useState([]);return s.jsx(P,{title:"Dynamic Update",children:s.jsxs(W,{children:[s.jsx(b,{onClick:()=>{const n=`update-${Math.random()}`;C.open({content:L(),key:n,onClosed:()=>{t(r=>r.filter(o=>o!==n))}}),t(r=>[...r,n])},children:"open"}),s.jsx(b,{type:"default",onClick:()=>{C.update(e[e.length-1],{content:L()})},children:"update"})]})})}C.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Me(){return s.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[s.jsx("h1",{className:"mb-8 text-3xl font-bold",children:s.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx(Oe,{}),s.jsx(be,{}),s.jsx(_e,{}),s.jsx(Ce,{}),s.jsx(ke,{})]})]})}X.createRoot(document.querySelector("#root")).render(s.jsx(Y.StrictMode,{children:s.jsx(Z,{theme:{cssVar:!0,algorithm:[ee.darkAlgorithm]},children:s.jsx(Me,{})})}));
