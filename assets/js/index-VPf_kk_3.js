import{r as l,j as r,T as G,c as J,C as E,B as O,S as B,R as W,a as X,b as Z,t as ee}from"./vendor-C4UeqpuF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&T(e,n,t[n]);if(I)for(var n of I(t))se.call(t,n)&&T(e,n,t[n]);return e},k=(e,t)=>ne(e,re(t)),m=(e,t,n)=>T(e,typeof t!="symbol"?t+"":t,n);function x(e){const t=l.useRef(e);t.current=l.useMemo(()=>e,[e]);const n=l.useRef();return n.current||(n.current=function(...o){return t.current.apply(this,o)}),n.current}function Q(){return typeof window<"u"&&typeof document<"u"}function U(e){return typeof e=="function"}function ie(e,t){const n=v({},e);return t.forEach(o=>delete n[o]),n}function ae(...e){return e.filter(Boolean).join(" ")}function A(e,t){const n=v({},t);for(const o in e)e[o]!==void 0&&(n[o]=e[o]);return n}function ce(e){return(e||0)*1e3}var ue=(e,t)=>!Object.is(e,t);function le(e,t=ue){const n=l.useRef(),o=l.useRef();return t(o.current,e)&&(n.current=o.current,o.current=e),n.current}var de=()=>{const[,e]=l.useState({});return l.useCallback(()=>e({}),[])};function fe(e){const{defaultValue:t,value:n,onChange:o,beforeValue:s,postValue:a,onInit:u}=e,C=Object.prototype.hasOwnProperty.call(e,"value")&&typeof n<"u",j=l.useMemo(()=>{let i=n;return C?i=n:t!==void 0&&(i=U(t)?t():t),i},[]);l.useEffect(()=>{u==null||u(j)},[j]);const f=l.useRef(j);C&&(f.current=n);const h=le(f.current);if(a){const i=a(f.current,h);i&&(f.current=i)}const b=de();function c(i){let p=U(i)?i(f.current):i;if(s){const M=s(p,f.current);M&&(p=M)}o&&o(p,f.current),C||(f.current=p,b())}return[f.current,x(c),h]}var H=Q()?l.useLayoutEffect:l.useEffect,he=e=>(t,n)=>{const o=l.useRef(!1);e(()=>()=>{o.current=!1},[]),e(()=>{if(!o.current)o.current=!0;else return t()},n)},pe=he,me=pe(H);function xe(e){const{content:t,className:n,style:o,duration:s,onOpenChange:a,onClosed:u,pauseOnHover:C,hover:j,updateFlag:f,transition:h,open:b,onEnter:c,onUpdate:i,onExited:p,offsetHeight:M}=e,_=l.useRef(!1),R=x(()=>typeof h=="string"?{transition:h}:{transition:h==null?void 0:h.name,duration:h==null?void 0:h.duration,exitDuration:h==null?void 0:h.exitDuration}),y=l.useRef(),w=l.useRef(null),[S,q]=fe({defaultValue:!!b,value:b,onChange:d=>{a(d)}}),N=x(()=>{if(C&&j){y.current&&clearTimeout(y.current);return}s&&(y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{q(!1),y.current&&clearTimeout(y.current)},ce(s)))});me(()=>{S&&N()},[j]);const V=x(()=>{if(!w.current)return;const d=w.current.clientHeight;c(d)}),K=x(()=>{var d;const P=(d=w.current)==null?void 0:d.clientHeight;i(P||0)}),D=x(()=>{var d;const P=(d=w.current)==null?void 0:d.clientHeight;p(P||0),u==null||u()}),z=x((d,P)=>[`translate(-50%, calc(-50% - ${P}px))`,d].filter(Boolean).join(" ")),Y=x(d=>[...new Set(["transform",d])].filter(Boolean).join(", "));return H(()=>{if(S)return _.current?K():_.current=!0,N(),()=>{y.current&&clearTimeout(y.current)}},[f]),H(()=>{t||D()},[t]),r.jsx(G,k(v({mounted:S},R()),{onEnter:V,onExited:D,initial:!0,children:d=>r.jsx("div",{style:k(v(v({position:"fixed",zIndex:9999,top:"50%",left:"50%"},o),d),{transitionProperty:Y(d.transitionProperty),transform:z(d.transform,M)}),ref:w,className:ae("toast__content",n),children:t})}))}var ve=xe;function ye(e){const{toasts:t,onClosed:n,onOpenChange:o}=e,[s,a]=l.useState(!1),[u,C]=l.useState(new Map),j=x((c,i)=>{C(p=>(p.set(c,i),new Map(p)))}),f=x(j),h=x(c=>{C(i=>(i.delete(c),new Map(i)))}),b=x(c=>{const i=t.findIndex(_=>_.key===c.key);let p=0;const M=t.length-1;for(let _=M;_>i;_--){const R=u.get(t[_].key)||0,y=u.get(t[_-1].key)||0;p+=y/2+R/2+t[i].gap}return p});return r.jsx("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},className:"toast__container",children:t.map(c=>r.jsx(l.Fragment,{children:c.render(r.jsx(ve,k(v({},ie(c,["key"])),{onOpenChange:i=>o(c.key,i),onEnter:i=>{j(c.key,i)},onUpdate:i=>{f(c.key,i)},onExited:()=>{h(c.key)},onClosed:()=>{var i;(i=c.onClosed)==null||i.call(c),n(c.key)},hover:s,offsetHeight:b(c)})))},c.key))})}var ge=ye,F="__react_root__";function je(e,t){const n=t[F]||J.createRoot(t);n.render(e),t[F]=n}var _e=class{constructor(e){m(this,"containerID","react-atom-toast"),m(this,"container",null),m(this,"queue"),this.queue=e}createContainer(){if(Q()){let e=document.getElementById(this.containerID);e||(e=document.createElement("div"),e.id=this.containerID,document.body.appendChild(e)),this.container=e}}render(e){if(!e.length&&this.container){this.container.remove(),this.container=null;return}this.createContainer(),this.container&&this.reactMount(e,this.container)}reactMount(e,t){je(r.jsx(ge,{toasts:e,onClosed:n=>this.queue.remove(n),onOpenChange:(n,o)=>{this.queue.update(n,{open:o})}}),t)}},Ce=class{constructor(){m(this,"renderer"),m(this,"toasts",[]),this.renderer=new _e(this)}render(){this.renderer.render(this.toasts)}add(e){var t;const{maxCount:n,key:o}=e;if(o&&this.toasts.some(u=>u.key===o)){this.update(o,e);return}const s=this.toasts.filter(u=>u.open===!0);if(n&&s.length>=n)if(n===1){for(let u=0;u<s.length-1;u++)this.remove(s[u].key);this.update(s[s.length-1].key,k(v({},e),{open:!0}));return}else this.close((t=s[0])==null?void 0:t.key);const a=k(v({},e),{key:e.key||Math.random().toString(36),open:!0});this.toasts.push(a),this.render()}close(e){e&&this.update(e,{open:!1})}closeAll(){this.toasts=this.toasts.map(e=>k(v({},e),{open:!1})),this.render()}remove(e){this.toasts=this.toasts.filter(t=>t.key!==e),this.render()}removeAll(){this.toasts=[],this.render()}update(e,t){const n=this.toasts.findIndex(o=>o.key===e);n!==-1&&(this.toasts[n]=k(v(v({},this.toasts[n]),t),{updateFlag:!this.toasts[n].updateFlag}),this.render())}},Oe=class{constructor(){m(this,"defaultOptions",{duration:2,pauseOnHover:!0,transition:"fade",maxCount:3,gap:16,render:e=>e}),m(this,"toastQueue"),m(this,"open",e=>{e&&typeof e=="object"&&"content"in e||(e={content:e}),this.toastQueue.add(A(e,this.defaultOptions))}),m(this,"close",e=>{this.toastQueue.close(e)}),m(this,"closeAll",()=>{this.toastQueue.closeAll()}),m(this,"update",(e,t)=>{this.toastQueue.update(e,v({},t))}),m(this,"setDefaultOptions",e=>{this.defaultOptions=A(e,this.defaultOptions)}),this.toastQueue=new Ce}},g=new Oe;function ke(){return r.jsx(E,{title:"Dynamic Style",children:r.jsx(O,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,className:"bg-red-400"})},children:"open"})})}const L="update";function be(){const e=t=>r.jsxs("div",{className:"flex items-center gap-x-2",children:[t,r.jsx("button",{onClick:()=>{g.update(L,{content:e(`update-${Math.random()}`)})},children:"click to update"})]});return r.jsx(E,{title:"Click Content to Update",children:r.jsx(B,{children:r.jsx(O,{onClick:()=>{g.open({content:e(`update-${Math.random()}`),pauseOnHover:!0,key:L})},children:"open"})})})}function Me(){const e="closable";return r.jsx(E,{title:"Closable",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(O,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,duration:0,key:e})},children:"open"}),r.jsx(O,{type:"default",onClick:()=>{g.close(e)},children:"close"})]})})}function Ee(){return r.jsx(E,{title:"Default Toast",children:r.jsx(O,{onClick:()=>{g.open(`Hello, world! ${Math.random()}`)},children:"open"})})}function we(){return r.jsx(E,{title:"Single Toast",children:r.jsx(O,{onClick:()=>{g.open({content:`Hello, world! ${Math.random()}`,maxCount:1,transition:{name:"fade",duration:1}})},children:"open"})})}function $(){const e=Math.floor(Math.random()*5)+1;return Array.from({length:e},()=>Math.random()).map(t=>r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("div",{children:t},t)},t))}function Pe(){const[e,t]=l.useState([]);return r.jsx(E,{title:"Dynamic Update",children:r.jsxs(B,{children:[r.jsx(O,{onClick:()=>{const n=`update-${Math.random()}`;g.open({content:$(),key:n,onClosed:()=>{t(o=>o.filter(s=>s!==n))}}),t(o=>[...o,n])},children:"open"}),r.jsx(O,{type:"default",onClick:()=>{g.update(e[e.length-1],{content:$()})},children:"update"})]})})}g.setDefaultOptions({className:"bg-white bg-opacity-95 p-2 rounded text-black"});function Re(){return r.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[r.jsx("h1",{className:"mb-8 text-3xl font-bold",children:r.jsx("a",{href:"https://github.com/hemengke1997/react-atom-toast",target:"_blank",children:"react-atom-toast"})}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx(Ee,{}),r.jsx(we,{}),r.jsx(ke,{}),r.jsx(Me,{}),r.jsx(Pe,{}),r.jsx(be,{})]})]})}W.createRoot(document.querySelector("#root")).render(r.jsx(X.StrictMode,{children:r.jsx(Z,{theme:{cssVar:!0,algorithm:[ee.darkAlgorithm]},children:r.jsx(Re,{})})}));
